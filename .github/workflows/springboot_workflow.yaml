name: SpringBoot Microservice

defaults:
    run:
        shell: bash
        working-directory: demo

on:
    push:

    workflow_dispatch:


jobs:
    container-demo:
        runs-on: ubuntu-latest
        container:
            image: eclipse-temurin:17-jdk
        
        steps:
            - name: checkout
              uses: actions/checkout@v4.1.1

            - name: Check java version
              run: java --version
    
    springboot-build:
        runs-on: ubuntu-latest
        outputs:
            success: ${{ steps.build.outputs.result }}

        steps:
            - name: Checkout
              uses: actions/checkout@v4.1.1
            
            - name: Build
              id: build
              run: |
                ./gradlew build
                echo "result=OK" >> $GITHUB_OUTPUTS

    springboot-container:
        runs-on: ubuntu-latest
        needs: springboot-build

        steps:
            - name: Checkout
              uses: actions/checkout@v4.1.1

            - name: Build Container
              run: |
                ${{ needs.springboot-build.outputs.success }}




            